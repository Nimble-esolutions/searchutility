{% load static i18n %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% trans "Register - CC & RCS Maharashtra" %}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="{% static 'main/css/style.css' %}">
  <style>
    .login-bg { min-height: 60vh; display:flex; justify-content:center; align-items:center; background-color:#f0f0f0; padding:2rem 1rem; }
    .register-card { max-width: 650px; width:100%; }
    .position-relative { position: relative; }
    .toggle-password { position: absolute; top:38px; right:10px; cursor:pointer; }
  </style>
</head>
<body>

<div class="login-bg">
  <div class="card shadow-sm p-4 register-card">
    <h4 class="text-center mb-4">{% trans "Registration Form" %}</h4>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <form method="post" action="{% url 'register' %}">
      {% csrf_token %}

      {% for field in form %}
        <div class="mb-3 position-relative">
          {{ field.label_tag }}
          {{ field }}
          {% if field.help_text %}
            <small class="form-text text-muted">{{ field.help_text }}</small>
          {% endif %}
          {% for error in field.errors %}
            <div class="text-danger small">{{ error }}</div>
          {% endfor %}
        </div>
      {% endfor %}

      <button type="submit" class="btn btn-primary w-100">{% trans "Register" %}</button>
    </form>

    <div class="mt-3 text-center">
      <small>{% trans "Already have an account?" %} <a href="{% url 'login' %}">{% trans "Login here" %}</a></small>
    </div>
  </div>
</div>

<script>
  // Password toggle
  document.querySelectorAll('.toggle-password').forEach(function(span){
      span.addEventListener('click', function(){
          const target = document.querySelector(this.dataset.target);
          const type = target.getAttribute('type') === 'password' ? 'text' : 'password';
          target.setAttribute('type', type);
          this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
      });
  });
</script>

</body>
</html>
